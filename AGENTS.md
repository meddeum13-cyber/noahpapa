# AGENTS.md

> 이 파일은 이 저장소에서 작업하는 AI 에이전트를 위한 운영 규칙입니다.
> 목적: 일관된 코드 품질, 예측 가능한 변경, 빠른 리뷰를 보장합니다.

---

## 1) Purpose

- 이 저장소의 변경은 **작고 명확하며 되돌리기 쉬운 단위**로 수행합니다.
- 기능 구현보다 먼저 **안전성(회귀 방지), 가독성, 검증 가능성**을 우선합니다.
- 불확실한 요구사항은 추정으로 밀어붙이지 않고, 가정 사항을 명확히 남깁니다.

---

## 2) Scope & Priority Rules

- 이 파일의 범위는 `AGENTS.md`가 위치한 디렉터리 하위 전체입니다.
- 하위 디렉터리에 또 다른 `AGENTS.md`가 있으면 **더 깊은 파일의 규칙이 우선**합니다.
- 충돌 시 우선순위:
  1. 시스템/사용자 직접 지시
  2. 더 깊은 경로의 `AGENTS.md`
  3. 루트 `AGENTS.md`
  4. 일반 관례

---

## 3) Repository Structure (작성 필요)

> 아래는 실제 구조에 맞게 채우세요.

- `index.html`: [역할]
- `app.js`: [역할]
- `styles.css`: [역할]
- `docs/` (있다면): [역할]
- `tests/` (있다면): [역할]

**규칙**
- 관련 없는 파일은 건드리지 않습니다.
- 파일 이동/이름 변경은 필요성과 영향도를 변경 설명에 반드시 포함합니다.

---

## 4) Working Style

- 변경 전: 문제 정의와 완료 조건(Definition of Done)을 1~3줄로 요약합니다.
- 구현 중: 큰 변경은 단계별로 나누고, 각 단계가 동작 가능한 상태를 유지합니다.
- 변경 후: 무엇을/왜/어떻게 검증했는지 명확히 남깁니다.

**Do**
- 최소 수정으로 목적 달성
- 기존 패턴 우선 재사용
- 사용자 관점 영향(UX/API/성능/호환성) 기록

**Don’t**
- 요청 범위를 넘어선 리팩터링
- 근거 없는 의존성 추가
- 테스트/검증 없이 “동작할 것”이라고 가정

---

## 5) Coding Conventions

### General
- 변수/함수명은 의도를 드러내는 이름을 사용합니다.
- 하드코딩 값은 상수화하고, 의미를 주석 또는 이름으로 표현합니다.
- 주석은 “무엇”보다 “왜”를 설명합니다.

### JavaScript (프로젝트 사용 시)
- 작은 순수 함수로 분리하고, DOM 조작 지점을 최소화합니다.
- 예외/오류 처리는 사용자 메시지와 로그 관점에서 구분합니다.
- 비동기 코드는 `async/await`를 우선합니다.

### HTML/CSS (프로젝트 사용 시)
- 의미론적 태그를 우선합니다.
- 접근성(aria-label, 대비, 키보드 탐색)을 기본 고려합니다.
- 스타일은 재사용 가능한 클래스 단위로 구성합니다.

---

## 6) Testing & Validation

- 변경 유형에 맞는 최소 검증을 반드시 수행합니다.
- 테스트가 없다면, 재현 절차 + 수동 검증 결과를 남깁니다.

### 권장 체크리스트
- [ ] 기존 기능 회귀 없음
- [ ] 신규/변경 기능 정상 동작
- [ ] 콘솔 오류 없음
- [ ] 주요 경로(핵심 사용자 플로우) 점검

### 예시 명령 (프로젝트에 맞게 교체)
- `npm test`
- `npm run lint`
- `npm run build`

---

## 7) Commit Rules

- 커밋은 논리적 단위로 나눕니다.
- 커밋 메시지 형식(권장):
  - `feat: ...`
  - `fix: ...`
  - `refactor: ...`
  - `docs: ...`
  - `test: ...`
  - `chore: ...`

**좋은 커밋 메시지 예시**
- `feat: add keyboard navigation for modal actions`
- `fix: prevent null error when sidebar state is missing`
- `docs: add AGENTS.md operating template`

---

## 8) Pull Request Rules

PR 설명에는 아래를 반드시 포함합니다.

1. **Summary**: 무엇이 바뀌었는지
2. **Why**: 왜 필요한지
3. **How to Test**: 재현/검증 절차
4. **Risks**: 잠재 영향 및 롤백 방법
5. **Screenshots** (UI 변경 시)

### PR 체크리스트
- [ ] 범위 외 변경 없음
- [ ] 테스트/검증 결과 첨부
- [ ] 문서(필요 시) 업데이트
- [ ] 리뷰어가 바로 재현 가능한 설명 포함

---

## 9) Documentation Update Policy

다음 중 하나라도 해당하면 문서를 함께 갱신합니다.
- 사용자 흐름이 바뀜
- 설정/환경변수/실행 방법이 바뀜
- API/입출력 포맷이 바뀜

문서 변경이 불필요하다면 PR에 사유를 짧게 남깁니다.

---

## 10) Security & Safety

- 시크릿, 토큰, 개인정보는 절대 커밋하지 않습니다.
- 외부 입력은 신뢰하지 않고 검증/정규화합니다.
- 파괴적 명령(데이터 삭제/마이그레이션)은 사전 백업/복구 경로를 명시합니다.

---

## 11) Performance & Reliability

- 성능에 영향 있는 변경은 최소한의 전/후 비교 근거를 남깁니다.
- 실패 가능 경로(네트워크/파일/권한)를 고려한 방어 로직을 포함합니다.
- 재시도/타임아웃/사용자 피드백 전략을 정의합니다.

---

## 12) When Blocked

다음 형식으로 즉시 상태를 공유합니다.

- **Blocked by**: (권한/요구사항/재현불가/외부서비스 장애 등)
- **Tried**: 시도한 방법
- **Need**: 해결에 필요한 정보/결정
- **Fallback**: 당장 가능한 대안

---

## 13) Quick Playbooks

### A) 버그 수정
1. 재현 조건 기록
2. 최소 재현 코드/절차 확보
3. 원인 지점 고립
4. 최소 수정 적용
5. 회귀 테스트
6. PR에 원인-해결-검증 기록

### B) 작은 기능 추가
1. 완료 조건 정의
2. UI/로직/API 영향 점검
3. 기능 구현 + 예외 처리
4. 테스트 추가/갱신
5. 문서/스크린샷 갱신

### C) 문서 전용 변경
1. 사실관계 확인
2. 예시 명령 검증
3. 깨진 링크/오탈자 점검

---

## 14) Template Customization Guide

이 템플릿 적용 직후 아래 항목을 팀 상황에 맞게 교체하세요.

- `Repository Structure` 섹션 실제 경로/역할
- 테스트 명령 (`npm`, `pnpm`, `yarn`, `pytest` 등)
- 커밋/브랜치 네이밍 정책
- 코드 소유자/리뷰 정책
- 배포/릴리즈 절차

---

## 15) Minimal Version (짧은 운영본이 필요할 때)

아래 5줄만 남겨도 기본 운영은 가능합니다.

1. 범위 밖 변경 금지
2. 작은 단위로 수정 + 이유 명시
3. 변경 유형별 검증 필수
4. UI 변경 시 스크린샷 첨부
5. PR에 Summary/Why/How to Test/Risks 포함
